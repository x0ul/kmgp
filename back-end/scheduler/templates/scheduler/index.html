{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}My Shows and Episodes{% endblock %}</h1>
{% if g.user %}
<a class="action" href="{{ url_for('scheduler.create_show') }}">New Show</a>
{% endif %}
{% endblock %}

{% block content %}
{% for show in shows %}
<article class="show">
  <header>
    <h1>{{ show['title'] }}</h1>
  </header>
  <p class="body">{{ show['description'] }}</p>
  <a class="action" href="{{ url_for('scheduler.update_show', id=show['id']) }}">Edit</a>
  <div class="about">
    <p>
      Created by {{ show['creator'] }} on <span class="create_update_time">{{ show['created_at'].isoformat() }}</span>
    </p>
    <p>
      Updated by {{ show['updater'] }} on <span class="create_update_time">{{ show['updated_at'].isoformat() }}</span>
    </p>
  </div>
</article>
{% if not loop.last %}
<hr>
{% endif %}
{% endfor %}

<script type="text/javascript">
  // display created/modified timestamps in user local time
  let dates = document.getElementsByClassName("create_update_time")
  for (const d of dates) {
      d.textContent = new Date(d.textContent).toString()
  }
</script>

{% endblock %}
